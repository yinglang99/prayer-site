<!DOCTYPE html>
<html>
<head>
    <title>çº¯å…‰æ•™ä¼šæ¯æ—¥ç¥ˆç¥·</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* åŸºç¡€æ ·å¼ */
        body {
            background: linear-gradient(to right, #ffb6c1, #87cefa);
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        h1 {
            color: #e91e63;
            text-align: center;
            margin-bottom: 30px;
        }

        /* ç¥·å‘Šè¾“å…¥åŒº */
        #prayerText {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 2px solid #ff80ab;
            border-radius: 10px;
            margin-bottom: 15px;
            resize: vertical;
        }

        /* æŒ‰é’®æ ·å¼ */
        #prayBtn {
            background: #ff4081;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            display: block;
            width: 100%;
            transition: transform 0.2s;
        }

        #prayBtn:hover {
            background: #f50057;
            transform: scale(1.05);
        }

        /* å†å²è®°å½• */
        .prayer-item {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .prayer-date {
            color: #ff4081;
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* ç¥ç¦åŠ¨ç”» */
        .blessing-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
        }

        .blessing-gif {
            width: 200px;
            height: 200px;
            margin: 15px auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ¸ çº¯å…‰æ•™ä¼šæ¯æ—¥ç¥ˆç¥·</h1>
        
        <div class="prayer-input">
            <textarea id="prayerText" placeholder="å†™ä¸‹ä½ ä»Šæ—¥çš„ç¥ˆç¥·ï¼ˆæœ€å¤š300å­—ï¼‰..." maxlength="300"></textarea>
            <button id="prayBtn">å°å°ä»Šæ—¥ç¥ˆç¥·</button>
        </div>

        <div id="stats">
            <p>è¿ç»­ç¥ˆç¥·å¤©æ•°ï¼š<span id="streakDays">0</span> å¤©</p>
        </div>

        <div class="history">
            <h3>ğŸ“œ ç¥ˆç¥·å†å²</h3>
            <div id="prayerList"></div>
        </div>
    </div>

    <!-- ç¥ç¦åŠ¨ç”»å®¹å™¨ -->
    <div class="blessing-container" id="blessingContainer">
        <p id="blessingText"></p>
        <img class="blessing-gif" id="blessingGif" alt="èµç¦åŠ¨ç”»">
    </div>

    <script>
        // ç¥ç¦é…ç½®
        const BLESSINGS = {
            3: {
                text: "âœ¨ å°æ¨±çš„ç¥ç¦ï¼šä¸‰æ—¥çš„åšæŒå·²ç‚¹äº®ã€Œç¯ã€ç‰Œï¼",
                gif: "https://example.com/sakura3.gif"
            },
            7: {
                text: "ğŸ¥ çŸ¥ä¸–èµç¦ï¼šä¸ƒæ—¥çš„è™”è¯šå¬å”¤ã€Œç¿”ã€ç‰Œé™ä¸´ï¼",
                gif: "https://example.com/sakura7.gif"
            },
            15: {
                text: "ğŸŒ™ å®¡åˆ¤è€…æœˆè®¤è¯ï¼šåŠæœˆæˆå°±è§£é”ã€Œé•œã€ç‰ŒçœŸè°›ï¼",
                gif: "https://example.com/sakura15.gif"
            },
            30: {
                text: "ğŸ”® åº“æ´›é‡Œå¤šä¼ æ‰¿ï¼šæ»¡æœˆè½®å›è·å¾—ã€Œå…‰ã€ç‰Œæ°¸æ’ï¼",
                gif: "https://example.com/sakura30.gif"
            }
        };

        // åˆå§‹åŒ–æ•°æ®
        let prayData = JSON.parse(localStorage.getItem('prayData')) || {
            streak: 0,
            lastDate: '',
            prayers: []
        };

        // é¡µé¢å…ƒç´ 
        const elements = {
            prayerText: document.getElementById('prayerText'),
            prayBtn: document.getElementById('prayBtn'),
            streakDays: document.getElementById('streakDays'),
            prayerList: document.getElementById('prayerList'),
            blessingContainer: document.getElementById('blessingContainer'),
            blessingText: document.getElementById('blessingText'),
            blessingGif: document.getElementById('blessingGif')
        };

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            elements.streakDays.textContent = prayData.streak;
            updatePrayerList();
        }

        // ä¿å­˜ç¥ˆç¥·è®°å½•
        function savePrayer() {
            const today = new Date().toLocaleDateString();
            const prayerText = elements.prayerText.value.trim();

            if (!prayerText) {
                alert('è¯·å†™ä¸‹ä»Šæ—¥çš„ç¥ˆç¥·å†…å®¹ï¼');
                return;
            }

            if (today === prayData.lastDate) {
                alert('ä»Šæ—¥å·²ç»è¿›è¡Œè¿‡ç¥ˆç¥·äº†ï¼');
                return;
            }

            // æ›´æ–°æ•°æ®
            prayData.streak++;
            prayData.lastDate = today;
            prayData.prayers.unshift({
                date: today,
                text: prayerText
            });

            // ä¿æŒæœ€å¤š30æ¡è®°å½•
            if (prayData.prayers.length > 30) {
                prayData.prayers.pop();
            }

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('prayData', JSON.stringify(prayData));
            
            // æ›´æ–°ç•Œé¢
            elements.streakDays.textContent = prayData.streak;
            elements.prayerText.value = '';
            updatePrayerList();
            showBlessing();
        }

        // æ˜¾ç¤ºç¥ç¦åŠ¨ç”»
        function showBlessing() {
            const blessing = BLESSINGS[prayData.streak];
            if (!blessing) return;

            elements.blessingText.textContent = blessing.text;
            elements.blessingGif.src = blessing.gif;
            
            elements.blessingContainer.style.display = 'block';
            setTimeout(() => {
                elements.blessingContainer.style.display = 'none';
            }, 3000);
        }

        // æ›´æ–°å†å²è®°å½•
        function updatePrayerList() {
            elements.prayerList.innerHTML = prayData.prayers
                .map(prayer => `
                    <div class="prayer-item">
                        <div class="prayer-date">${prayer.date}</div>
                        <div class="prayer-text">${prayer.text}</div>
                    </div>
                `)
                .join('');
        }

        // äº‹ä»¶ç›‘å¬
        elements.prayBtn.addEventListener('click', savePrayer);

        // åˆå§‹åŒ–
        window.addEventListener('load', initPage);
    </script>
</body>
</html>